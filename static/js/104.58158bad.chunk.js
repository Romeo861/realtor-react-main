"use strict";(self.webpackChunkrealtor_react=self.webpackChunkrealtor_react||[]).push([[104],{6104:(e,t,i)=>{i.r(t),i.d(t,{default:()=>_});var s=i(3063),n=i(2791),a=i(9436),r=(i(2900),i(9085)),l=i(276),c=i(5689),o=i(4261),g=i(7799),d=i(673),m=i(7689),u=i(184);function _(){const e=(0,m.s0)(),t=(0,c.v0)(),[i,_]=(0,n.useState)(!1),[h,f]=(0,n.useState)(!1),[p,b]=(0,n.useState)(null),[x,j]=(0,n.useState)({type:"rent",name:"",bedrooms:1,bathrooms:1,parking:!1,furnished:!1,address:"",description:"",offer:!1,regularPrice:0,discountedPrice:0,latitude:0,longitude:0,images:{}}),{type:N,name:v,bedrooms:y,bathrooms:k,parking:w,address:C,furnished:L,description:U,offer:q,regularPrice:P,discountedPrice:S,latitude:Z,longitude:A,images:B}=x,E=(0,m.UO)();function I(e){let t=null;"true"===e.target.value&&(t=!0),"false"===e.target.value&&(t=!1),e.target.files&&j((t=>(0,s.Z)((0,s.Z)({},t),{},{images:e.target.files}))),e.target.files||j((i=>{var n;return(0,s.Z)((0,s.Z)({},i),{},{[e.target.id]:null!==(n=t)&&void 0!==n?n:e.target.value})}))}return(0,n.useEffect)((()=>{p&&p.userRef!==t.currentUser.uid&&(r.Am.error("You can't edit this listing"),e("/"))}),[p,t.currentUser.uid,e]),(0,n.useEffect)((()=>{f(!0),async function(){const t=(0,g.JU)(d.db,"listings",E.listingId),i=await(0,g.QT)(t);i.exists()?(b(i.data()),j((0,s.Z)({},i.data())),f(!1)):(e("/"),r.Am.error("Listing does not exist"))}()}),[e,E.listingId]),h?(0,u.jsx)(a.Z,{}):(0,u.jsxs)("main",{className:"create-listing",children:[(0,u.jsx)("h1",{className:"create-listing__heading",children:"Edit Listing"}),(0,u.jsxs)("form",{onSubmit:async function(n){if(n.preventDefault(),f(!0),+S>=+P)return f(!1),void r.Am.error("Discounted price needs to be less than regular price");if(B.length>6)return f(!1),void r.Am.error("Maximum 6 images are allowed");let a={};if(i)return;a.lat=Z,a.lng=A;const c=await Promise.all([...B].map((e=>async function(e){return new Promise(((i,s)=>{const n=(0,l.cF)(),a="".concat(t.currentUser.uid,"-").concat(e.name,"-").concat((0,o.Z)()),r=(0,l.iH)(n,a),c=(0,l.B0)(r,e);c.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(e=>{s(e)}),(()=>{(0,l.Jt)(c.snapshot.ref).then((e=>{i(e)}))}))}))}(e)))).catch((e=>{f(!1),r.Am.error("Images not uploaded")})),m=(0,s.Z)((0,s.Z)({},x),{},{imgUrls:c,geolocation:a,timestamp:(0,g.Bt)(),userRef:t.currentUser.uid});delete m.images,!m.offer&&delete m.discountedPrice,delete m.latitude,delete m.longitude;const u=(0,g.JU)(d.db,"listings",E.listingId);await(0,g.r7)(u,m),f(!1),r.Am.success("Listing Edited"),e("/category/".concat(m.type,"/").concat(u.id))},className:"create-listing__form",children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Sell / Rent"}),(0,u.jsxs)("div",{className:"create-listing__form-toggle-btn-wrap",children:[(0,u.jsx)("button",{type:"button",id:"type",value:"sale",onClick:I,className:"create-listing__form-toggle-btn ".concat("rent"===N?"create-listing__form-toggle-btn--white":"create-listing__form-toggle-btn--black"),children:"sell"}),(0,u.jsx)("button",{type:"button",id:"type",value:"rent",onClick:I,className:"create-listing__form-toggle-btn ".concat("sale"===N?"create-listing__form-toggle-btn--white":"create-listing__form-toggle-btn--black"),children:"rent"})]}),(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Name"}),(0,u.jsx)("input",{type:"text",id:"name",value:v,onChange:I,placeholder:"Name",maxLength:"32",minLength:"10",required:!0,className:"create-listing__form-input"}),(0,u.jsxs)("div",{className:"create-listing__form-small-input-wrap",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Beds"}),(0,u.jsx)("input",{type:"number",id:"bedrooms",value:y,onChange:I,min:"1",max:"50",required:!0,className:" create-listing__form-input"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Baths"}),(0,u.jsx)("input",{type:"number",id:"bathrooms",value:k,onChange:I,min:"1",max:"50",required:!0,className:"create-listing__form-input"})]})]}),(0,u.jsx)("p",{className:" create-listing__form-sub-heading",children:"Parking spot"}),(0,u.jsxs)("div",{className:"create-listing__form-toggle-btn-wrap",children:[(0,u.jsx)("button",{type:"button",id:"parking",value:!0,onClick:I,className:"create-listing__form-toggle-btn ".concat(w?"create-listing__form-toggle-btn--black":"create-listing__form-toggle-btn--white"),children:"Yes"}),(0,u.jsx)("button",{type:"button",id:"parking",value:!1,onClick:I,className:"create-listing__form-toggle-btn ".concat(w?"create-listing__form-toggle-btn--white":"create-listing__form-toggle-btn--black"),children:"no"})]}),(0,u.jsx)("p",{className:" create-listing__form-sub-heading",children:"Furnished"}),(0,u.jsxs)("div",{className:"create-listing__form-toggle-btn-wrap",children:[(0,u.jsx)("button",{type:"button",id:"furnished",value:!0,onClick:I,className:"create-listing__form-toggle-btn ".concat(L?"create-listing__form-toggle-btn--black":"create-listing__form-toggle-btn--white"),children:"yes"}),(0,u.jsx)("button",{type:"button",id:"furnished",value:!1,onClick:I,className:"create-listing__form-toggle-btn ".concat(L?"create-listing__form-toggle-btn--white":"create-listing__form-toggle-btn--black"),children:"no"})]}),(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Address"}),(0,u.jsx)("textarea",{type:"text",id:"address",value:C,onChange:I,placeholder:"Address",required:!0,className:"create-listing__form-input"}),!i&&(0,u.jsxs)("div",{className:"create-listing__form-rent",children:[(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Latitude"}),(0,u.jsx)("input",{type:"number",id:"latitude",value:Z,onChange:I,required:!0,min:"-90",max:"90",step:"any",className:"create-listing__form-input",placeholder:"Ex: 13.095631"})]}),(0,u.jsxs)("div",{className:"",style:{marginLeft:"1.4rem"},children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Longitude"}),(0,u.jsx)("input",{type:"number",id:"longitude",value:A,onChange:I,required:!0,min:"-180",max:"180",step:"any",className:"create-listing__form-input",placeholder:"Ex: 80.207620"})]})]}),(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Description"}),(0,u.jsx)("textarea",{type:"text",id:"description",value:U,onChange:I,placeholder:"Description",required:!0,className:"create-listing__form-input"}),(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Offer"}),(0,u.jsxs)("div",{className:"create-listing__form-toggle-btn-wrap",children:[(0,u.jsx)("button",{type:"button",id:"offer",value:!0,onClick:I,className:"create-listing__form-toggle-btn ".concat(q?"create-listing__form-toggle-btn--black":"create-listing__form-toggle-btn--white"),children:"yes"}),(0,u.jsx)("button",{type:"button",id:"offer",value:!1,onClick:I,className:"create-listing__form-toggle-btn ".concat(q?"create-listing__form-toggle-btn--white":"create-listing__form-toggle-btn--black"),children:"no"})]}),(0,u.jsx)("div",{className:"create-listing__form-rent",children:(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Regular price"}),(0,u.jsxs)("div",{className:"create-listing__form-toggle-rent-btn-wrap",children:[(0,u.jsx)("input",{type:"number",id:"regularPrice",value:P,onChange:I,min:"50",max:"400000000",required:!0,className:"create-listing__form-input"}),"rent"===N&&(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"1.4rem"},children:(0,u.jsx)("p",{className:"create-listing__form-rent-month",style:{width:"100px",fontSize:"1.2rem"},children:"\u20b9 / Month"})})]})]})}),q&&(0,u.jsx)("div",{className:"create-listing__form-rent",children:(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Discounted price"}),(0,u.jsxs)("div",{className:"create-listing__form-toggle-rent-btn-wrap",children:[(0,u.jsx)("input",{type:"number",id:"discountedPrice",value:S,onChange:I,min:"50",max:"400000000",required:q,className:"create-listing__form-input"}),"rent"===N&&(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"1.4rem"},children:(0,u.jsx)("p",{className:"create-listing__form-rent-month",style:{width:"100px",fontSize:"1.2rem"},children:"\u20b9 / Month"})})]})]})}),(0,u.jsxs)("div",{style:{marginBottom:"3rem"},children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Images"}),(0,u.jsx)("p",{style:{color:"rgb(76 74 74)",fontSize:"12px",marginBottom:"5px"},children:"The first image will be the cover (max 6) / image file should be less than 2mb/image file"}),(0,u.jsx)("input",{type:"file",id:"images",onChange:I,accept:".jpg,.png,.jpeg",multiple:!0,required:!0,className:"create-listing__form-input",style:{fontSize:"20px"}})]}),(0,u.jsx)("button",{type:"submit",className:"create-listing__btn-signing",children:"Edit Listing"})]})]})}},2900:()=>{}}]);
//# sourceMappingURL=104.58158bad.chunk.js.map
"use strict";(self.webpackChunkrealtor_react=self.webpackChunkrealtor_react||[]).push([[28],{8028:(e,t,i)=>{i.r(t),i.d(t,{default:()=>_});var s=i(3063),n=i(2791),a=i(9436),r=(i(2900),i(9085)),l=i(276),c=i(5689),o=i(4261),g=i(7799),m=i(673),d=i(7689),u=i(184);function _(){const e=(0,d.s0)(),t=(0,c.v0)(),[i,_]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[f,b]=(0,n.useState)({type:"rent",name:"",bedrooms:1,bathrooms:1,parking:!1,furnished:!1,address:"",description:"",offer:!1,regularPrice:0,discountedPrice:0,latitude:13.095631,longitude:80.20762,images:{}}),{type:x,name:j,bedrooms:N,bathrooms:v,parking:y,address:k,furnished:w,description:C,offer:q,regularPrice:L,discountedPrice:P,latitude:S,longitude:Z,images:B}=f;function A(e){let t=null;"true"===e.target.value&&(t=!0),"false"===e.target.value&&(t=!1),e.target.files&&b((t=>(0,s.Z)((0,s.Z)({},t),{},{images:e.target.files}))),e.target.files||b((i=>{var n;return(0,s.Z)((0,s.Z)({},i),{},{[e.target.id]:null!==(n=t)&&void 0!==n?n:e.target.value})}))}return h?(0,u.jsx)(a.Z,{}):(0,u.jsxs)("main",{className:"create-listing",children:[(0,u.jsx)("h1",{className:"create-listing__heading",children:"Create a Listing"}),(0,u.jsxs)("form",{onSubmit:async function(n){if(n.preventDefault(),p(!0),+P>=+L)return p(!1),void r.Am.error("Discounted price needs to be less than regular price");if(B.length>6)return p(!1),void r.Am.error("Maximum 6 images are allowed");let a={};if(i)return;a.lat=+S,a.lng=+Z;const c=await Promise.all([...B].map((e=>async function(e){return new Promise(((i,s)=>{const n=(0,l.cF)(),a="".concat(t.currentUser.uid,"-").concat(e.name,"-").concat((0,o.Z)()),r=(0,l.iH)(n,a),c=(0,l.B0)(r,e);c.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(e=>{s(e)}),(()=>{(0,l.Jt)(c.snapshot.ref).then((e=>{i(e)}))}))}))}(e)))).catch((e=>{p(!1),r.Am.error("Images not uploaded")})),d=(0,s.Z)((0,s.Z)({},f),{},{imgUrls:c,geolocation:a,timestamp:(0,g.Bt)(),userRef:t.currentUser.uid});delete d.images,!d.offer&&delete d.discountedPrice,delete d.latitude,delete d.longitude;const u=await(0,g.ET)((0,g.hJ)(m.db,"listings"),d);p(!1),r.Am.success("Listing created"),e("/category/".concat(d.type,"/").concat(u.id))},className:"create-listing__form",children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Sell / Rent"}),(0,u.jsxs)("div",{className:"create-listing__form-toggle-btn-wrap",children:[(0,u.jsx)("button",{type:"button",id:"type",value:"sale",onClick:A,className:"create-listing__form-toggle-btn ".concat("rent"===x?"create-listing__form-toggle-btn--white":"create-listing__form-toggle-btn--black"),children:"sell"}),(0,u.jsx)("button",{type:"button",id:"type",value:"rent",onClick:A,className:"create-listing__form-toggle-btn ".concat("sale"===x?"create-listing__form-toggle-btn--white":"create-listing__form-toggle-btn--black"),children:"rent"})]}),(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Name"}),(0,u.jsx)("input",{type:"text",id:"name",value:j,onChange:A,placeholder:"Name",maxLength:"32",minLength:"10",required:!0,className:"create-listing__form-input"}),(0,u.jsxs)("div",{className:"create-listing__form-small-input-wrap",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Beds"}),(0,u.jsx)("input",{type:"number",id:"bedrooms",value:N,onChange:A,min:"1",max:"50",required:!0,className:" create-listing__form-input"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Baths"}),(0,u.jsx)("input",{type:"number",id:"bathrooms",value:v,onChange:A,min:"1",max:"50",required:!0,className:"create-listing__form-input"})]})]}),(0,u.jsx)("p",{className:" create-listing__form-sub-heading",children:"Parking spot"}),(0,u.jsxs)("div",{className:"create-listing__form-toggle-btn-wrap",children:[(0,u.jsx)("button",{type:"button",id:"parking",value:!0,onClick:A,className:"create-listing__form-toggle-btn ".concat(y?"create-listing__form-toggle-btn--black":"create-listing__form-toggle-btn--white"),children:"Yes"}),(0,u.jsx)("button",{type:"button",id:"parking",value:!1,onClick:A,className:"create-listing__form-toggle-btn ".concat(y?"create-listing__form-toggle-btn--white":"create-listing__form-toggle-btn--black"),children:"no"})]}),(0,u.jsx)("p",{className:" create-listing__form-sub-heading",children:"Furnished"}),(0,u.jsxs)("div",{className:"create-listing__form-toggle-btn-wrap",children:[(0,u.jsx)("button",{type:"button",id:"furnished",value:!0,onClick:A,className:"create-listing__form-toggle-btn ".concat(w?"create-listing__form-toggle-btn--black":"create-listing__form-toggle-btn--white"),children:"yes"}),(0,u.jsx)("button",{type:"button",id:"furnished",value:!1,onClick:A,className:"create-listing__form-toggle-btn ".concat(w?"create-listing__form-toggle-btn--white":"create-listing__form-toggle-btn--black"),children:"no"})]}),(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Address"}),(0,u.jsx)("textarea",{type:"text",id:"address",value:k,onChange:A,placeholder:"Address",required:!0,className:"create-listing__form-input"}),!i&&(0,u.jsxs)("div",{className:"create-listing__form-rent",children:[(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Latitude"}),(0,u.jsx)("input",{type:"number",id:"latitude",value:S,onChange:A,required:!0,min:"-90",max:"90",step:"any",className:"create-listing__form-input",placeholder:"Ex: 13.095631"})]}),(0,u.jsxs)("div",{className:"",style:{marginLeft:"1.4rem"},children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Longitude"}),(0,u.jsx)("input",{type:"number",id:"longitude",value:Z,onChange:A,required:!0,min:"-180",max:"180",step:"any",className:"create-listing__form-input",placeholder:"Ex: 80.207620"})]})]}),(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Description"}),(0,u.jsx)("textarea",{type:"text",id:"description",value:C,onChange:A,placeholder:"Description",required:!0,className:"create-listing__form-input"}),(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Offer"}),(0,u.jsxs)("div",{className:"create-listing__form-toggle-btn-wrap",children:[(0,u.jsx)("button",{type:"button",id:"offer",value:!0,onClick:A,className:"create-listing__form-toggle-btn ".concat(q?"create-listing__form-toggle-btn--black":"create-listing__form-toggle-btn--white"),children:"yes"}),(0,u.jsx)("button",{type:"button",id:"offer",value:!1,onClick:A,className:"create-listing__form-toggle-btn ".concat(q?"create-listing__form-toggle-btn--white":"create-listing__form-toggle-btn--black"),children:"no"})]}),(0,u.jsx)("div",{className:"create-listing__form-rent",children:(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Regular price"}),(0,u.jsxs)("div",{className:"create-listing__form-toggle-rent-btn-wrap",children:[(0,u.jsx)("input",{type:"number",id:"regularPrice",value:L,onChange:A,min:"50",max:"400000000",required:!0,className:"create-listing__form-input"}),"rent"===x&&(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"1.4rem"},children:(0,u.jsx)("p",{className:"create-listing__form-rent-month",style:{width:"100px",fontSize:"1.2rem"},children:"\u20b9 / Month"})})]})]})}),q&&(0,u.jsx)("div",{className:"create-listing__form-rent",children:(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Discounted price"}),(0,u.jsxs)("div",{className:"create-listing__form-toggle-rent-btn-wrap",children:[(0,u.jsx)("input",{type:"number",id:"discountedPrice",value:P,onChange:A,min:"50",max:"400000000",required:q,className:"create-listing__form-input"}),"rent"===x&&(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"1.4rem"},children:(0,u.jsx)("p",{className:"create-listing__form-rent-month",style:{width:"100px",fontSize:"1.2rem"},children:"\u20b9 / Month"})})]})]})}),(0,u.jsxs)("div",{style:{marginBottom:"3rem"},children:[(0,u.jsx)("p",{className:"create-listing__form-sub-heading",children:"Images"}),(0,u.jsx)("p",{style:{color:"rgb(76 74 74)",fontSize:"12px",marginBottom:"5px"},children:"The first image will be the cover (max 6) / image file size should be less than 2mb/image file"}),(0,u.jsx)("input",{type:"file",id:"images",onChange:A,accept:".jpg,.png,.jpeg",multiple:!0,required:!0,className:"create-listing__form-input",style:{fontSize:"20px"}})]}),(0,u.jsx)("button",{type:"submit",className:"create-listing__btn-signing",children:"Create Listing"})]})]})}},2900:()=>{}}]);
//# sourceMappingURL=28.57793cde.chunk.js.map
"use strict";(self.webpackChunkrealtor_react=self.webpackChunkrealtor_react||[]).push([[611],{7611:(e,s,i)=>{i.r(s),i.d(s,{default:()=>_});var t=i(3063),a=i(7689),l=i(1087),n=i(3728),r=i(2791),o=i(5689),c=i(9085),d=i(1686),u=i.n(d),m=i(7799),f=i(673),p=i(7835),h=i(184);function _(){const e=(0,o.v0)(),s=(0,a.s0)(),[i,d]=(0,r.useState)(!1),[_,g]=(0,r.useState)(!1),[x,j]=(0,r.useState)(!0),[N,y]=(0,r.useState)(null),[b,k]=(0,r.useState)({name:e.currentUser.displayName,email:e.currentUser.email}),{name:v,email:w}=b;(0,r.useEffect)((()=>{!async function(){const s=(0,m.hJ)(f.db,"listings"),i=(0,m.IO)(s,(0,m.ar)("userRef","==",e.currentUser.uid),(0,m.Xo)("timestamp","desc")),t=await(0,m.PL)(i);let a=[];t.forEach((e=>a.push({id:e.id,data:e.data()}))),y(a),j(!1)}()}),[e.currentUser.uid]);const C=e=>{u().Confirm.show("Delete Product!!!","You are about to delete this product","Delete","Cancel",(function(){!async function(e){await(0,m.oe)((0,m.JU)(f.db,"listings",e));const s=N.filter((s=>s.id!==e));y(s),c.Am.success("Successfully deleted the listing")}(e)}),(function(){console.log("Delete Canceled")}),{width:"320px",borderRadius:"3px",titleColor:"red",okButtonBackground:"red",cssAnimationStyle:"zoom"})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("section",{className:" profile",children:[(0,h.jsx)("h1",{className:" profile__header",children:"My Profile"}),(0,h.jsxs)("div",{className:"profile__form-btn-wrap",children:[(0,h.jsxs)("form",{className:"profile__form",children:[(0,h.jsx)("input",{type:"text",id:"name",value:v,disabled:!i,onChange:function(e){k((s=>(0,t.Z)((0,t.Z)({},s),{},{[e.target.id]:e.target.value})))},className:"profile__form-input ".concat(i?"profile__form-input--modifier":"")}),(0,h.jsx)("input",{type:"email",id:"email",disabled:!0,className:"profile__form-input",value:w}),(0,h.jsxs)("div",{className:"profile__form-links",children:[(0,h.jsxs)("p",{className:"profile__form-name-change-link",children:["Do you want to change your name?",(0,h.jsx)("span",{onClick:()=>{i&&async function(){g(!0);try{if(e.currentUser.displayName!==v){await(0,o.ck)(e.currentUser,{displayName:v});const s=(0,m.JU)(f.db,"users",e.currentUser.uid);await(0,m.r7)(s,{name:v})}c.Am.success("Profile details updated"),g(!1)}catch(s){c.Am.error("Could not update the profile details")}}(),d((e=>!e))},className:"profile__form-name-change-link-name",children:!_&&i?"Apply change":_?(0,h.jsx)("div",{className:"loader--little"}):"Edit"})]}),(0,h.jsx)("p",{onClick:function(){e.signOut(),s("/")},className:"profile__form-sign-out",children:"Sign out"})]})]}),(0,h.jsx)("button",{type:"submit",className:"profile__home-sell-btn",children:(0,h.jsxs)(l.rU,{to:"/create-listing",className:"profile__home-sell-btn-link",children:[(0,h.jsx)(n.qHm,{className:"profile__home-sell-btn-logo"}),"Sell or rent your home"]})})]})]}),(0,h.jsxs)("div",{className:"user-listings-section",children:[x&&(0,h.jsx)("div",{className:"loader"}),!x&&N.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h2",{className:"user-listings-section__header",children:"My Listings"}),(0,h.jsx)("ul",{className:"user-listings-section__listing",children:N.map((e=>(0,h.jsx)(p.Z,{id:e.id,listing:e.data,onDelete:()=>C(e.id),onEdit:()=>{return i=e.id,void s("/edit-listing/".concat(i));var i}},e.id)))})]})]})]})}}}]);
//# sourceMappingURL=611.7c9f56f6.chunk.js.map